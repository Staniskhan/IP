<div>
    <h2>Читатели</h2>

    <div th:if="${success}" style="background-color: #d4edda; color: #155724; padding: 10px; margin-bottom: 15px; border-radius: 3px;" th:text="${success}"></div>
    <div th:if="${error}" style="background-color: #f8d7da; color: #721c24; padding: 10px; margin-bottom: 15px; border-radius: 3px;" th:text="${error}"></div>

    <table style="width: 100%; border-collapse: collapse; background-color: white;">
        <thead>
        <tr style="background-color: #f2f2f2;">
            <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Имя пользователя</th>
            <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Взятые книги</th>
            <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Количество</th>
            <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Статус</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="reader : ${readers}" style="border-bottom: 1px solid #ddd;">
            <td style="border: 1px solid #ddd; padding: 8px;"><strong th:text="${reader.username}"></strong></td>
            <td style="border: 1px solid #ddd; padding: 8px;">
                <div th:if="${#lists.isEmpty(reader.borrowedBooks)}">
                    <span style="color: #666;">Нет</span>
                </div>
                <div th:unless="${#lists.isEmpty(reader.borrowedBooks)}">
                    <ul style="list-style: none; margin: 0; padding: 0;">
                        <li th:each="book : ${reader.borrowedBooks}">
                            <span th:text="${book}"></span>
                        </li>
                    </ul>
                </div>
            </td>
            <td style="border: 1px solid #ddd; padding: 8px;" th:text="${#lists.size(reader.borrowedBooks)}"></td>
            <td style="border: 1px solid #ddd; padding: 8px;">
                <span th:if="${#lists.isEmpty(reader.borrowedBooks)}">Активен</span>
                <span th:unless="${#lists.isEmpty(reader.borrowedBooks)}">Читает</span>
            </td>
        </tr>
        <tr th:if="${#lists.isEmpty(readers)}">
            <td colspan="4" style="text-align: center; color: #666; padding: 20px;">Нет читателей</td>
        </tr>
        </tbody>
    </table>

    <div style="margin-top: 20px;">
        <a href="/librarian/dashboard" style="color: #666;">Назад</a>
    </div>
</div>